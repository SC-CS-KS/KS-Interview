# 性能优化

## 高并发、任务执行时间短的业务怎样使用线程池？  

线程池线程数可以设置为CPU核数+1，减少线程上下文的切换。  

## 并发不高、任务执行时间长的业务怎样使用线程池？  

* IO密集型的任务  

因为IO操作并不占用CPU，所以不要让所有的CPU闲下来。  
可以加大线程池中的线程数目，让CPU处理更多的业务。  

* 计算密集型任务  

这个就没办法了，和（1）一样吧，线程池中的线程数设置得少一些，减少线程上下文的切换。 

## 并发高、业务执行时间长的业务怎样使用线程池？  

解决这种类型任务的关键不在于线程池而在于整体架构的设计。  
看看这些业务里面某些数据是否能做缓存是第一步，增加服务器是第二步。  
业务执行时间长的问题，也可能需要分析一下，看看能不能使用中间件对任务进行拆分和解耦。  
